<root BTCPP_format="4" >
   <include path="./subtree_cam_find_and_track_ball.xml" />
   <include path="./subtree_find_ball.xml" />
   <BehaviorTree ID="StrikerFreeKickReady">
      <ReactiveSequence>
         <ReactiveSequence _while="gc_is_sub_state_kickoff_side" name="move to attacker position">
            <SubTree ID="CamFindAndTrackBall" _autoremap="true" />
            <SelfLocate />
            <Sequence>
               <StrikerDecide decision_out="{decision}" decision_in="{decision}"
                              kick_dir_out="{kick_dir}"
                              target_ball_x_out="{target_ball_x}"
                              target_ball_y_out="{target_ball_y}"
                              kick_range_threshold="1.0" kick_angle_threshold="0.8" />
               <!-- <RobotFindBall _while="decision == 'find'" vtheta_limit="1.0" /> -->
               <SubTree ID="FindBall" _while="decision=='find'" _autoremap="true" />
               <Approach _while="decision == 'approach'"
                           kick_dir="{kick_dir}" min_range="0.6" max_range="1.0"
                           vx_limit="1.0" vy_limit="0.5" vtheta_limit="1.0"
                           target_ball_x="{target_ball_x}" target_ball_y="{target_ball_y}" />
               <Approach _while="decision == 'scramble'"
                           kick_dir="{kick_dir}" min_range="0.8" max_range="1.6"
                           vx_limit="1.0" vy_limit="0.5" vtheta_limit="1.0"
                           target_ball_x="{target_ball_x}" target_ball_y="{target_ball_y}" />
               <Sequence _while="decision == 'kick' || decision == 'dribble'">
                  <SetVelocity />
                  <Sleep msec="1000" />
               </Sequence>
            </Sequence>
         </ReactiveSequence>
         <ReactiveSequence _while="!gc_is_sub_state_kickoff_side" name="move to defender position">
            <SubTree ID="CamFindAndTrackBall" _autoremap="true" />
            <SelfLocate />
            <BlockGoal dist_to_ball="1.6" />
         </ReactiveSequence>
      </ReactiveSequence>
   </BehaviorTree>
</root>
